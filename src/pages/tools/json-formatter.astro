---
import Layout from '../../layouts/Layout.astro';
---

<Layout 
	title="JSON Alchemist: Clean & Format Data" 
	description="Instant, browser-based JSON formatting and validation. Clean your data without sending it to a server."
>
	<div class="max-w-4xl mx-auto">
		<div class="mb-8 text-center">
			<h1 class="text-3xl font-bold text-slate-900">JSON Alchemist</h1>
			<p class="mt-2 text-slate-600 font-medium">Beautify your messy data strings into readable structures.</p>
		</div>

		<div class="grid grid-cols-1 gap-4">
			<textarea 
				id="json-input" 
				rows="10" 
				placeholder="Paste your messy JSON here..." 
				class="w-full p-4 font-mono text-sm border rounded-xl shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none border-slate-200"
			></textarea>
			
			<div class="flex space-x-4">
				<button id="format-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-all">Beautify</button>
				<button id="clear-btn" class="bg-slate-200 text-slate-700 px-6 py-2 rounded-lg font-bold hover:bg-slate-300 transition-all">Clear</button>
			</div>

			<pre id="json-output" class="p-4 bg-slate-900 text-green-400 rounded-xl overflow-x-auto text-sm min-h-[200px] hidden"></pre>
			<div id="error-msg" class="p-4 bg-red-50 text-red-600 rounded-xl text-sm hidden">Invalid JSON. Please check your syntax.</div>
		</div>

		<article class="mt-16 prose prose-slate max-w-none border-t border-slate-100 pt-10 text-slate-600">
			<h2 class="text-2xl font-bold text-slate-900">Professional Data Formatting</h2>
			<p class="mt-4 leading-relaxed">
				Working with minified JSON can be a challenge for developers. The JSON Alchemist provides a lightweight, local-only solution to format data for better readability. Whether you are debugging an API response or organizing a configuration file, this tool provides the structure you need instantly.
			</p>

			<h3 class="text-xl font-bold text-slate-900 mt-8">Secure and Client-Side</h3>
			<p class="mt-4 leading-relaxed">
				Many online formatters upload your data to their databases. The Heuheu treats your code with respect. Our JSON Alchemist executes the formatting logic entirely in your browser using the native JSON.parse and stringify APIs. This means sensitive API keys or user data stay within your session and are never seen by us or any third parties.
			</p>
		</article>
	</div>

	<script>
		const input = document.getElementById('json-input');
		const output = document.getElementById('json-output');
		const error = document.getElementById('error-msg');
		const formatBtn = document.getElementById('format-btn');
		const clearBtn = document.getElementById('clear-btn');

		formatBtn.addEventListener('click', () => {
			try {
				const raw = input.value;
				const formatted = JSON.stringify(JSON.parse(raw), null, 4);
				output.textContent = formatted;
				output.classList.remove('hidden');
				error.classList.add('hidden');
			} catch (e) {
				error.classList.remove('hidden');
				output.classList.add('hidden');
			}
		});

		clearBtn.addEventListener('click', () => {
			input.value = '';
			output.classList.add('hidden');
			error.classList.add('hidden');
		});
	</script>
</Layout>
