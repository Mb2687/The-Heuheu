---
import MainLayout from '../../layouts/MainLayout.astro';
---

<MainLayout 
	title="Color Hex Alchemist: HEX, RGB, & HSL Converter" 
	description="Instantly convert between HEX, RGB, and HSL color formats. A fast, private, and local utility for web designers and developers."
>
	<div>
		<div class="mb-8 text-center">
			<h1 class="text-3xl font-bold text-slate-900">Color Hex Alchemist</h1>
			<p class="mt-2 text-slate-600 font-medium text-lg">Transmute color codes across digital formats.</p>
		</div>

		<div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm">
			<div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
				<div class="space-y-4">
					<div id="color-preview" class="w-full h-48 rounded-2xl shadow-inner border border-slate-200 transition-colors duration-200" style="background-color: #6366f1;"></div>
					<input type="color" id="color-picker" value="#6366f1" class="w-full h-12 p-1 rounded-lg cursor-pointer border-slate-200 bg-white" />
				</div>

				<div class="space-y-6">
					<div>
						<label class="block text-xs font-bold text-slate-500 uppercase mb-1">HEX Code</label>
						<input type="text" id="hex-input" value="#6366f1" class="w-full p-3 border rounded-lg font-mono focus:ring-2 focus:ring-indigo-500 outline-none border-slate-200" />
					</div>
					<div>
						<label class="block text-xs font-bold text-slate-500 uppercase mb-1">RGB Format</label>
						<input type="text" id="rgb-input" value="rgb(99, 102, 241)" class="w-full p-3 border rounded-lg font-mono focus:ring-2 focus:ring-indigo-500 outline-none border-slate-200" />
					</div>
					<div>
						<label class="block text-xs font-bold text-slate-500 uppercase mb-1">HSL Format</label>
						<input type="text" id="hsl-input" value="hsl(239, 84%, 67%)" class="w-full p-3 border rounded-lg font-mono focus:ring-2 focus:ring-indigo-500 outline-none border-slate-200" />
					</div>
				</div>
			</div>
		</div>

		<article class="mt-20 prose prose-slate max-w-none border-t border-slate-100 pt-12 text-slate-600">
			<h2 class="text-2xl font-bold text-slate-900">Understanding Digital Color Formats</h2>
			<p class="mt-4 leading-relaxed">
				Digital displays use various mathematical models to represent color. HEX codes are the standard for web development, while RGB (Red, Green, Blue) is often used in graphic design software. HSL (Hue, Saturation, Lightness) is increasingly popular among developers because it is more intuitive for humans to adjust.
			</p>

			<h3 class="text-xl font-bold text-slate-900 mt-10">Why Design Needs an Alchemist</h3>
			<p class="mt-4 leading-relaxed">
				When moving a project from a design tool to a stylesheet, you frequently need to convert formats to match your technical requirements. The Color Hex Alchemist provides a zero-lag way to swap these codes. Unlike bloated design suites, this tool loads instantly and gives you exactly what you need without extra features.
			</p>

			<h3 class="text-xl font-bold text-slate-900 mt-10">Private by Design</h3>
			<p class="mt-4 leading-relaxed">
				Many color tools track your palette choices to sell trend data to marketing firms. At The Heuheu, we believe your creative choices are your own. This tool runs 100% locally in your browser; your colors are never uploaded, analyzed, or stored on our servers.
			</p>
		</article>
	</div>

	<script is:inline>
		const picker = document.getElementById('color-picker');
		const preview = document.getElementById('color-preview');
		const hexInput = document.getElementById('hex-input');
		const rgbInput = document.getElementById('rgb-input');
		const hslInput = document.getElementById('hsl-input');

		function hexToRgb(hex) {
			const r = parseInt(hex.slice(1, 3), 16);
			const g = parseInt(hex.slice(3, 5), 16);
			const b = parseInt(hex.slice(5, 7), 16);
			return `rgb(${r}, ${g}, ${b})`;
		}

		function hexToHsl(hex) {
			let r = parseInt(hex.slice(1, 3), 16) / 255;
			let g = parseInt(hex.slice(3, 5), 16) / 255;
			let b = parseInt(hex.slice(5, 7), 16) / 255;
			const max = Math.max(r, g, b), min = Math.min(r, g, b);
			let h, s, l = (max + min) / 2;
			if (max === min) { h = s = 0; } else {
				const d = max - min;
				s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
				switch (max) {
					case r: h = (g - b) / d + (g < b ? 6 : 0); break;
					case g: h = (b - r) / d + 2; break;
					case b: h = (r - g) / d + 4; break;
				}
				h /= 6;
			}
			return `hsl(${Math.round(h * 360)}, ${Math.round(s * 100)}%, ${Math.round(l * 100)}%)`;
		}

		function updateAll(hex) {
			preview.style.backgroundColor = hex;
			hexInput.value = hex;
			rgbInput.value = hexToRgb(hex);
			hslInput.value = hexToHsl(hex);
		}

		picker.addEventListener('input', (e) => updateAll(e.target.value));
		hexInput.addEventListener('input', (e) => {
			if(/^#[0-9A-F]{6}$/i.test(e.target.value)) {
				updateAll(e.target.value);
				picker.value = e.target.value;
			}
		});
	</script>
</MainLayout>
