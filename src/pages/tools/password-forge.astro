---
import Layout from '../../layouts/Layout.astro';
---

<Layout 
	title="Password Forge: Secure, Private Key Generator" 
	description="Generate strong, random passwords locally in your browser. Customizable length and character sets for maximum security."
>
	<div class="max-w-4xl mx-auto">
		<div class="mb-8 text-center">
			<h1 class="text-3xl font-bold text-slate-900">Password Forge</h1>
			<p class="mt-2 text-slate-600 font-medium text-lg">Hammer out unhackable keys in total privacy.</p>
		</div>

		<div class="bg-white p-8 rounded-2xl border border-slate-200 shadow-sm max-w-2xl mx-auto">
			<div class="relative mb-8">
				<input 
					type="text" 
					id="password-output" 
					readonly 
					class="w-full p-5 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl font-mono text-xl text-center text-indigo-600 outline-none"
					value="P@ssword123!"
				/>
				<button id="copy-btn" class="mt-4 w-full bg-emerald-600 text-white py-3 rounded-lg font-bold hover:bg-emerald-700 transition-all flex items-center justify-center">
					Copy to Clipboard
				</button>
			</div>

			<div class="space-y-6">
				<div>
					<div class="flex justify-between mb-2">
						<label class="text-sm font-bold text-slate-700 uppercase">Length: <span id="length-val">16</span></label>
					</div>
					<input type="range" id="length-slider" min="8" max="64" value="16" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600" />
				</div>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<label class="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
						<input type="checkbox" id="include-upper" checked class="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500" />
						<span class="text-sm font-medium text-slate-700">Uppercase (A-Z)</span>
					</label>
					<label class="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
						<input type="checkbox" id="include-numbers" checked class="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500" />
						<span class="text-sm font-medium text-slate-700">Numbers (0-9)</span>
					</label>
					<label class="flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
						<input type="checkbox" id="include-symbols" checked class="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500" />
						<span class="text-sm font-medium text-slate-700">Symbols (!@#$)</span>
					</label>
					<button id="generate-btn" class="bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition-all shadow-md">
						Regenerate
					</button>
				</div>
			</div>
		</div>

		<article class="mt-20 prose prose-slate max-w-none border-t border-slate-100 pt-12 text-slate-600">
			<h2 class="text-2xl font-bold text-slate-900">Why Security Needs a "Forge"</h2>
			<p class="mt-4 leading-relaxed">
				In an era of frequent data breaches, using unique and complex passwords for every service is the most effective way to protect your digital identity. A strong password should be a random mix of characters that bears no resemblance to personal information or dictionary words.
			</p>

			<h3 class="text-xl font-bold text-slate-900 mt-10">Total Browser Isolation</h3>
			<p class="mt-4 leading-relaxed">
				Most online password generators are "black boxes"â€”you send a request to their server, and they send back a password. This creates a massive security risk: you have to trust that the provider isn't logging the passwords they generate for you. 
			</p>
			<div class="bg-amber-50 p-6 rounded-2xl my-8 border-l-4 border-amber-500">
				<p class="text-amber-900 font-medium">
					The Password Forge uses the <code>crypto.getRandomValues()</code> Web API. This means the randomness is generated by your own computer's hardware entropy. The resulting password never leaves your browser and is never transmitted over the internet.
				</p>
			</div>

			<h3 class="text-xl font-bold text-slate-900 mt-10">Creating a Strong Key</h3>
			<p class="mt-4">For maximum security, the Heuheu recommends:</p>
			<ul class="list-disc pl-5 space-y-3 mt-4">
				<li><strong>Length:</strong> Use at least 16 characters for critical accounts.</li>
				<li><strong>Entropy:</strong> Mix all four character types (Uppercase, Lowercase, Numbers, and Symbols) to increase the time it would take for a brute-force attack to succeed.</li>
				<li><strong>Uniqueness:</strong> Never reuse the same forged key across different platforms.</li>
			</ul>
		</article>
	</div>

	<script is:inline>
		const output = document.getElementById('password-output');
		const lengthSlider = document.getElementById('length-slider');
		const lengthVal = document.getElementById('length-val');
		const upperCheck = document.getElementById('include-upper');
		const numbersCheck = document.getElementById('include-numbers');
		const symbolsCheck = document.getElementById('include-symbols');
		const generateBtn = document.getElementById('generate-btn');
		const copyBtn = document.getElementById('copy-btn');

		function generate() {
			const length = lengthSlider.value;
			let charset = "abcdefghijklmnopqrstuvwxyz";
			if (upperCheck.checked) charset += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
			if (numbersCheck.checked) charset += "0123456789";
			if (symbolsCheck.checked) charset += "!@#$%^&*()_+~`|}{[]:;?><,./-=";

			let retVal = "";
			const array = new Uint32Array(length);
			window.crypto.getRandomValues(array);
			
			for (let i = 0; i < length; i++) {
				retVal += charset.charAt(array[i] % charset.length);
			}
			output.value = retVal;
		}

		lengthSlider.addEventListener('input', () => {
			lengthVal.innerText = lengthSlider.value;
			generate();
		});

		[upperCheck, numbersCheck, symbolsCheck, generateBtn].forEach(el => {
			el.addEventListener('click', generate);
		});

		copyBtn.addEventListener('click', () => {
			output.select();
			document.execCommand('copy');
			const originalText = copyBtn.innerText;
			copyBtn.innerText = "Copied to Clipboard!";
			copyBtn.classList.replace('bg-emerald-600', 'bg-slate-800');
			setTimeout(() => {
				copyBtn.innerText = originalText;
				copyBtn.classList.replace('bg-slate-800', 'bg-emerald-600');
			}, 2000);
		});

		// Initial Generate
		generate();
	</script>
</Layout>
