---
import MainLayout from '../../layouts/MainLayout.astro';
---

<MainLayout 
	title="Base64 Alchemist: Encode & Decode Strings" 
	description="Securely encode or decode text to Base64 format locally in your browser. Perfect for developers and data privacy."
>
	<div>
		<div class="mb-8 text-center">
			<h1 class="text-3xl font-bold text-slate-900">Base64 Alchemist</h1>
			<p class="mt-2 text-slate-600 font-medium text-lg">Transmute plain text into secure Base64 strings and back.</p>
		</div>

		<div class="grid grid-cols-1 gap-6">
			<div class="space-y-2">
				<label class="block text-sm font-bold text-slate-700 uppercase tracking-wide">Input Data</label>
				<textarea 
					id="input-text" 
					rows="6" 
					placeholder="Enter text to encode or Base64 to decode..." 
					class="w-full p-4 font-mono text-sm border rounded-xl shadow-sm focus:ring-2 focus:ring-indigo-500 outline-none border-slate-200 bg-white"
				></textarea>
			</div>
			
			<div class="flex flex-wrap gap-4">
				<button id="encode-btn" class="flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 transition-all shadow-md active:transform active:scale-95">Encode to Base64</button>
				<button id="decode-btn" class="flex-1 bg-emerald-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-emerald-700 transition-all shadow-md active:transform active:scale-95">Decode from Base64</button>
				<button id="clear-btn" class="bg-slate-200 text-slate-700 px-6 py-3 rounded-lg font-bold hover:bg-slate-300 transition-all">Clear</button>
			</div>

			<div class="space-y-2">
				<label class="block text-sm font-bold text-slate-700 uppercase tracking-wide">Result</label>
				<div id="output-container" class="relative">
					<textarea 
						id="output-text" 
						rows="6" 
						readonly
						class="w-full p-4 font-mono text-sm border rounded-xl shadow-sm bg-slate-50 border-slate-200 text-slate-800"
					></textarea>
				</div>
			</div>
			<div id="error-msg" class="p-4 bg-red-50 text-red-600 rounded-xl text-sm hidden font-medium border border-red-100">The input is not a valid Base64 string. Please check and try again.</div>
		</div>

		<article class="mt-20 prose prose-slate max-w-none border-t border-slate-100 pt-12 text-slate-600">
			<h2 class="text-2xl font-bold text-slate-900">Understanding Base64 Encoding</h2>
			<p class="mt-4 leading-relaxed">
				Base64 is a binary-to-text encoding scheme that represents binary data in an ASCII string format. By using a set of 64 unique characters, it allows for the transmission of data across systems that may only support text-based information. This is frequently used for embedding images in HTML/CSS, transferring data in URLs, or obfuscating simple strings.
			</p>

			<h3 class="text-xl font-bold text-slate-900 mt-10">Why Use a Browser-Based Encoder?</h3>
			<p class="mt-4 leading-relaxed">
				Security is the primary reason the Heuheu insists on local processing. Many online Base64 converters send your strings to a remote server for transformation. If you are encoding API keys, personal credentials, or sensitive configuration data, you are essentially handing that data to a third party.
			</p>
			<div class="bg-indigo-50 p-6 rounded-2xl my-8 border-l-4 border-indigo-500">
				<p class="text-indigo-900 font-medium italic">
					"The Base64 Alchemist runs entirely via client-side JavaScript. Your input never touches our servers, making it the safest choice for developers handling sensitive data."
				</p>
			</div>

			<h3 class="text-xl font-bold text-slate-900 mt-10">When to Use Base64</h3>
			<ul class="list-disc pl-5 space-y-3 mt-4">
				<li><strong>Data URIs:</strong> Convert small icons or images into strings to reduce HTTP requests.</li>
				<li><strong>API Authentication:</strong> Creating Basic Auth headers (username:password).</li>
				<li><strong>Safe URL Slugs:</strong> Encoding complex data into a format that won't break web links.</li>
			</ul>
		</article>
	</div>

	<script>
		const input = document.getElementById('input-text');
		const output = document.getElementById('output-text');
		const error = document.getElementById('error-msg');
		const encodeBtn = document.getElementById('encode-btn');
		const decodeBtn = document.getElementById('decode-btn');
		const clearBtn = document.getElementById('clear-btn');

		encodeBtn.addEventListener('click', () => {
			try {
				const encoded = btoa(input.value);
				output.value = encoded;
				error.classList.add('hidden');
			} catch (e) {
				error.textContent = "Error: Unable to encode. Ensure you are using standard characters.";
				error.classList.remove('hidden');
			}
		});

		decodeBtn.addEventListener('click', () => {
			try {
				const decoded = atob(input.value);
				output.value = decoded;
				error.classList.add('hidden');
			} catch (e) {
				error.textContent = "Error: Invalid Base64 string for decoding.";
				error.classList.remove('hidden');
			}
		});

		clearBtn.addEventListener('click', () => {
			input.value = '';
			output.value = '';
			error.classList.add('hidden');
		});
	</script>
</MainLayout>
